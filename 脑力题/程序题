有一个小国家，以生产高级葡萄酒闻名，全国的经济命脉也全依仗葡萄酒出口贸易。
某一年，另一大国向这小国下了1024瓶最高级红酒的订单，并预付了丰厚的定金。
假如交易成功并获得好评，类似生意将滚滚而来，会为全国人民带来很多年富足的生活。
于是全国人民同心协力，终于耗尽那一季的所有资源制成了1026瓶质量超高的名贵红酒，其中两瓶送交国家博物馆留为纪念，余下1024瓶准备付运。
但是，有一个对这国家极度憎恨的恐怖分子为了破坏这宗交易，不惜偷偷混入生产运输团队中，并在1024瓶酒中的其中两瓶酒内下了强力的生化毒药。
此毒药药性强烈，只需极少份量（约0.01毫升）便可置人于死，如混酒饮下则中毒者24小时内并无异样，但24小时过后的15分钟内（可能是1秒钟后，也可能是14分59秒后）会立即七孔流血暴毙。
在1024瓶酒要运上飞机的26小时前，恐怖分子的身份和计划都曝光了，但是因为他及时自杀了，官员们只确定了他在其中两瓶酒里下了生化毒药及其药性，但完全不知道是哪两瓶。
这时全国陷入一片恐慌，假若不把1024瓶酒及时运送到目的地，哪怕是少了一瓶，都作违约论，国家要赔偿巨额的违约金，财政上会出现严重赤字，未来好几年的人民生计将会非常艰辛。
但是假若把有剧毒的酒售卖出口并造成人命伤亡，将会对全国赖以为生的葡萄酒出产业造成无可挽救的声誉伤害，以后也休想做其他国家的生意了。
就在这危急关头，监狱里有40名快将行刑的死囚站了出来，为了他们的亲人和朋友，决定自告奋勇，以身试毒，望能挽回这一笔对全国人民至关重要的生意。
国家为了犒赏他们，不论试毒结果生死都会给与其家人一笔优厚奖金。（但是他们假若这次生还，回到监狱还是要服罪被处死的，不会被特赦。）
时间还有25小时多一点，官员们已经聚集了全国很多熟手包装工人，花了大半小时把1024瓶红酒拆装，从每瓶酒内提取了数毫升份量作试毒用途，然后又把它们全部重新包装。
现在距离最后时限还有24小时30分钟，40名自愿试毒的死囚和1024杯可能有毒的酒（每杯上都有标贴对照其相应的酒瓶号码）已经准备好了，现在只欠一个完善有系统的试毒程序来解决这难题。
（提示：因为考虑到试酒程序最少需要数分钟来执行，所以时间只够让死囚们试酒一次。如果分隔15分钟让死囚们试两次酒，那么第二批中毒者可能会在时限之后才被发现暴毙。）
附加题（暂时未有答案）：为了替国家节省奖金费用，希望能有更优化方案让参与试毒的死囚人数从40减低到32甚至更少。
程序猿的世界



---



死神的游戏
●死神让100名囚犯排成一队，并让每名囚犯戴上一顶红色或蓝色的帽子。每一名囚犯都可
以看到自己前面人头。上戴的帽子，但他却看不见自己的，也看不见身后其他人的;
●死神从队列最末尾的地方开始，询问最后一名囚犯他所戴帽子的颜色。他只能回答“红”或
“蓝”。如果回答正确，他就能活下来;
●如果他给了错误的答案，那就立刻被无声无息地杀掉!
●人人都听得到身后人的回答，但没人知道答案是对是错;
●列队行刑的前一天晚上，囚犯们要琢磨出一套能够自救的策略来;
●他们应该怎么做?

----

单线程方案
单线程? !不会慢么? !
●
解决慢，要比教会所有人跨线程写逻辑简单;
架构师的工作是取舍和折中，
不要炫技;
●项目框架越简单，适用性就越广;
●可以出错，但不要让错误向下传递;

